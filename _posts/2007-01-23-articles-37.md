---
layout: post
title: 初心者は知ったかぶりをする。中級者はそれなりの哲学を語る。上級者は沈黙を愛する
date: 2007-01-23 00:00:00 +0900
author: Tsukasa OISHI
permalink: /articles/37
---

　kaeruspoonへのリンクから飛んできたときの情報を保持していて、リンク元としてAjaxで表示しているけど、サーチエンジンの検索キーワードの日本語がURLエンコードされたままでした。なので、以下のようにしてみます。

```ruby
ref_url = URI.unescape(referer).toutf8
```

URI.unescapeメソッドでURLエンコードをデコードしてくれます。このままだと、EUCとかSJISの場合は文字化けしてしまうのでUTF8に変換しています。
　サーチエンジンの検索結果から飛んできたときは、リンク元のURLよりもサーチエンジンと検索キーワードだけ表示したほうがすっきりしそうですね。近いうちにそういう仕様に変更しましょう。

