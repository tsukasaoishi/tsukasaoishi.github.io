---
layout: post
title: 時間がないのではない。やる気がないのである。
date: 2006-12-18 00:00:00 +0900
author: Tsukasa OISHI
permalink: /articles/2
---

　昨日は朝７時に帰宅。前の日から会社の人とずっと飲んでました。仕事にいくユルさんを送り出してからホットカーペットの上でお昼まで熟睡。なんだかもったいない時間を過ごしている気がしないでもありません。

　午後からはkaeruspoonの続き。ちょっとだけAjaxを取り入れようかと試作中。Javascriptを直接書いてみたい気もするのだけど、今回はRailsの力を使おう。とりあえず夕方までこつこつコーディングをしました。

　豆乳鍋をはじめて食べました。豆乳ってあまり好きじゃないんだけど、豆乳鍋は野菜がすごくおいしくなってびっくりした。なかなかいいです。

　kaeruspoonにはトラックバックのかわりにリンク元表示機能をつけたのだけど、その情報はデフォルトでは表示させてなくて、Ajaxでクリックしたときにだけ表示するようにしてみた。クリックを押すたびに表示/非表示を繰り返そうと思ったのだけど、

```ruby
link_to_remote("リンク元[#{count.size}]",
                            :update => "diary_referer#{id}",
                            :url => diary_referer_url(:id => id),
                            :complete => "Element.toggle(\"diary_referer#{id}\")")
```

　これだと一回目のクリックが表示されません。二回目以降は期待通りに動くのですが。どう見ても、最初のトグルスイッチのデフォルト状態がオンになっていることは明白。オプションで指定できるのかとも思ってみましたがよくわからず。かわりに [http://rikima.dip.jp](http://rikima.dip.jp)を発見。なるほど、表示先の要素で指定するのが本当のような気がしてきました。というわけで以下のようにしてみました。

```ruby
<div id="diary_referer<%= diary.id %>" style="display:none;"></div>
```

　これでばっちり動きました。これなら、最初は表示していないということも明白になるし、なかなかいい感じです。

